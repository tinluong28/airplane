<!DOCTYPE html>
    <head>
        <title>Airplane Game</title>

    </head>
    <body>
        <style>
            #ocean {
                background-image: url("assets/ocean.jpg");
                position: absolute;
                width: 900px;
                height: 550px;
            }
            .player {
                background-image: url("assets/player.png");
                position: absolute;
                width: 75px;
                height: 75px;
                
            }
            .enemies {
                background-image: url("assets/enemy.png");
                position: absolute;
                width: 75px;
                height: 75px;
            }
        </style>        
        <div id="ocean">
            <div id="player">

            </div>
            <div id="enemies">
                
            </div>
        </div>
        
        <script type="text/javascript">
            let player = {
                left: 400,
                top: 450
            }

            let enemies = [
                {left: 250, top: 50},
                {left: 350, top: 50},
                {left: 450, top: 50},
                {left: 550, top: 50},
                {left: 300, top: 150},
                {left: 400, top: 150},
                {left: 500, top: 150}
            ]
            
            const drawPlayer = () => {
                let content = "<div class='player' style='left:"+player.left+"px; top:"+player.top+"px'></div>";
                document.getElementById('player').innerHTML = content;
            }
            drawPlayer();

            const drawEnemies = (enemies) => {
                let content="";
                if(enemies[enemies.length -1].top < 480){
                    enemies.map((enemy, idx) => {
                        content += "<div class='enemies' style='left:"+enemies[idx].left+"px; top:"+enemies[idx].top+"px'></div>"
                    })
                } else {
                    content = "";
                }
                
                document.getElementById("enemies").innerHTML = content;
            }
            
            const newRound = () => {
                drawEnemies(enemies);
                setTimeout(newRound, 5000)
            }

            newRound();
            document.onkeydown = (e) => {
                if(e.keyCode === 39 && player.left < 820) {
                    player.left += 10;
                } else if(e.keyCode === 37 && player.left > 10) {
                    player.left -= 10;
                } else if(e.keyCode === 38 && player.top > 350) {
                    player.top -= 10;
                } else if(e.keyCode === 40 && player.top < 450) {
                    player.top += 10;
                }
                drawPlayer()
            }
            
            const gameLoop = () => {
                let roundEnemies = enemies;
                roundEnemies = roundEnemies.map(enemy =>{
                    enemy.top +=10;
                    enemy.left = enemy.left
                    return enemy;
                    });
                drawEnemies(roundEnemies);
                setTimeout(gameLoop, 500);

            }
            gameLoop();

            
        </script>

    </body>
</html>